## Object
This is a CloudFormation template written in YAML format. It describes a serverless application pattern that uses AWS EventBridge and AWS Step Functions to monitor and respond to changes in the state of an Amazon Elastic Compute Cloud (EC2) instance.The template defines a single resource, a Serverless State Machine called "EC2StateWatcher". The State Machine has a set of States that are defined using AWS Step Functions' JSON-based state language. The States include a Choice state, "What Happened?", that is used to determine the next state to transition to based on the state of the EC2 instance. The States also include three Pass states, "It's Running", "It's Stopped", and "It's Gone", that are used to represent the end states of the State Machine.
The State Machine is triggered by an AWS EventBridge rule called "StateChange". The rule is configured to listen for events on the default event bus for EC2 instances that have changed state to "running", "stopped", or "terminated". The input to the State Machine is set using the "InputPath" property of the EventBridge rule, which selects the "detail" field of the event object.
